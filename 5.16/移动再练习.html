<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>九宫格</title>

    <style>
        /* reset start */
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            user-select: none;
        }

        html,
        body {
            width: 100%;
            height: 100%;
        }

        body {
            overflow: hidden;
        }

        li {
            list-style: none;
        }

        a {
            text-decoration: none;
        }

        /* reset end */

        #box {
            box-sizing: content-box;
            width: 474px;
            height: 324px;
            border: 5px solid rgba(255, 192, 203, .5);
            border-radius: 15px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
        }

        .item {
            box-sizing: content-box;
            width: 150px;
            height: 100px;
            float: left;
            margin: 2px;
            border: 2px solid rgba(125, 125, 125, .5);
            border-radius: 15px;
            overflow: hidden;
            cursor: move;
        }

        div.moving {
            background-color: wheat;
            border-color: #009ee0;
        }

        div.draging {
            box-sizing: content-box;
            position: absolute;
            width: 150px;
            height: 100px;
            border: 2px solid rgba(125, 125, 125, .5);
            border-radius: 15px;
            box-shadow: 2px 2px 2px 2px grey;
            cursor: move;
        }
    </style>
</head>

<body>
    <div id="box">
        <!-- img 图片 150X100 -->
        <div class="item">
            <img src="./img/1.png" alt="">
        </div>
        <div class="item">
            <img src="./img/2.png" alt="">
        </div>
        <div class="item">
            <img src="./img/3.png" alt="">
        </div>
        <div class="item">
            <img src="./img/4.png" alt="">
        </div>
        <div class="item">
            <img src="./img/5.png" alt="">
        </div>
        <div class="item">
            <img src="./img/6.png" alt="">
        </div>
        <div class="item">
            <img src="./img/7.png" alt="">
        </div>
        <div class="item">
            <img src="./img/8.png" alt="">
        </div>
        <div class="item">
            <img src="./img/9.png" alt="">
        </div>
    </div>
    <script src="../resource/jquery-1.7.2/jquery.js"></script>
    <script>
        $(function () {
            $('body').css('background-color', function () {
                let c1 = Math.floor(Math.random() * 256);
                let c2 = Math.floor(Math.random() * 256);
                let c3 = Math.floor(Math.random() * 256);
                return `rgb(${c1},${c2},${c3})`;
            });

            let canMove = true;
            $('#box div').mousemove(function (e) {
                e.preventDefault();
                if (canMove) {
                    canMove = false;
                    let initX = e.offsetX;
                    // offsetX mousemove事件相对于定位元素的x偏移
                    let initY = e.offsetY;
                    // offsetY mousemove事件相对于定位元素的y偏移
                    let $initDiv = $(this);
                    let $clone1 = $initDiv.clone();
                    $clone1.addClass('draging').html($initDiv.html()).css({
                        top: $initDiv.position().top,
                        left: $initDiv.position().left
                    }).appendTo('#box');
                    $initDiv.addClass('moving').html('');


                    // 第二阶段：移动

                    $('#box').mouseleave(function (e) {
                        let cloPosX = e.pageX - $(this).offset().left - initX;
                    })
                }
            })
        })
    </script>
</body>

</html>